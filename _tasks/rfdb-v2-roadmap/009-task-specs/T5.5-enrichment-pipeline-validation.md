# T5.5: Enrichment Pipeline Validation

> Milestone: M5 (Enrichment Pipeline) — sync point S4
> Dependencies: T5.1, T5.2, T5.3, T5.4
> Estimated: ~15 tests + benchmark report

---

## Validation Checklist

### 1. End-to-End Pipeline

- [ ] Edit file → analysis → blast radius → selective enrichment → guarantees → correct graph
- [ ] All enricher edges in correct enrichment shards
- [ ] Blast radius correctly identifies dependent files
- [ ] Selective enrichment: only affected enrichers run

### 2. Watch Mode Simulation

- [ ] 10 sequential file edits → correct incremental updates each time
- [ ] Graph converges to same state as full re-analysis
- [ ] No edge duplication after multiple incremental cycles

### 3. Benchmark: Selective vs Full

| Scenario | Measure | Target |
|----------|---------|--------|
| Change 1 file in 1000-file project | Enrichment time | <50% of full re-enrichment |
| Change function body only | Enrichers triggered | Only body-related enrichers |
| No semantic change (whitespace) | Enrichment time | ~0 (content_hash unchanged) |

### 4. Edge Cases

- [ ] File deleted → all enrichment edges for that file cleaned up
- [ ] Enricher added to pipeline → full re-enrichment for its edge types
- [ ] Enricher removed → its enrichment shards become orphaned → GC
- [ ] Empty delta (no changes) → no enrichment runs

### 5. Regression

- [ ] Full analysis of test fixtures → same graph as v1 (minus metadata hacks)
- [ ] All existing enrichment tests pass
